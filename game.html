<!DOCTYPE html>
<html>
    <head>
        <title>Draughts</title>
        <style>
            html, body {
                margin:0;
                padding: 0;
            }
            .canvascontainer {
                text-align: center;
            }
        </style>
    </head>
    <body>
        <div style="display: flex; flex-direction: column;">
            <div id="statusdiv">
            </div>
        <div class = "canvascontainer">
            <canvas id="gamecanvas"></canvas>
        </div>
        <div>
            
        </div>
        </div>
        <script src="game.js"></script>
        <script>
            var ctx = document.getElementById('gamecanvas').getContext('2d');

            game = new Game(ctx);

            game.resizeCanvas(window.innerWidth*4/5, window.innerHeight*4/5);
            window.addEventListener('resize', () => {
                game.resizeCanvas(window.innerWidth*4/5, window.innerHeight*4/5);
                game.drawBoard();
            });

            var canvas = this.ctx.canvas;
            canvas.addEventListener('click', function(event) {
                var x = event.pageX - canvas.offsetLeft;
                var y = event.pageY - canvas.offsetTop;
                game.handleClick(x,y);
            });

            canvas.addEventListener('click',function(event) {
                updateStatus();
            })

            function updateStatus() {
                var turn = game.turn;
                var statdiv = document.getElementById('statusdiv');
                if(turn != -1) {
                    statdiv.innerHTML = (turn==1)?"Turn: Black":"Turn: Red";
                } else {
                    statdiv.innerHTML = game.gameEndedMessage();
                }
            }

            game.drawBoard();

            //game.play();
        </script>
    </body>
</html>
